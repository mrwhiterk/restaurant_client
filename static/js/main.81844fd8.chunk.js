(this["webpackJsonprestaurant-client"]=this["webpackJsonprestaurant-client"]||[]).push([[0],{109:function(e,t,a){},112:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(24),c=a.n(l),s=a(30),o=(a(79),a(38)),i=a(5),u=a.n(i),m=a(13),d=a(14),p=a(17),h=a(15),f=a(19),v=a(18),E=(a(81),a(29)),b=(a(82),function(e){return r.a.createElement("form",{className:"LoginForm",onSubmit:e.handleSubmit},r.a.createElement("h2",null,"Login"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"exampleInputEmail1"},"Email address"),r.a.createElement("input",{type:"email",className:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp",placeholder:"Enter email",name:"email",value:e.email,onChange:e.handleChange,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"exampleInputPassword1"},"Password"),r.a.createElement("input",{type:"password",className:"form-control",id:"exampleInputPassword1",placeholder:"Password",name:"password",value:e.password,onChange:e.handleChange,required:!0})),r.a.createElement("button",{type:"submit",className:"btn btn-success"},"Submit"))}),g=(a(83),function(e){return r.a.createElement("form",{className:"SignupForm",onSubmit:e.handleSubmit},r.a.createElement("h2",null,"Signup"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"exampleInputEmail1"},"Email address"),r.a.createElement("input",{type:"email",className:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp",placeholder:"Enter email",name:"email",value:e.email,onChange:e.handleChange,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"exampleInputPassword1"},"Password"),r.a.createElement("input",{type:"password",className:"form-control",id:"exampleInputPassword1",placeholder:"Password",name:"password",value:e.password,onChange:e.handleChange,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"exampleInputPassword1"},"Confirm Password"),r.a.createElement("input",{type:"password",className:"form-control",id:"exampleInputPassword1",placeholder:"Password",name:"passwordConfirm",value:e.passwordConfirm,onChange:e.handleChange,required:!0})),r.a.createElement("button",{type:"submit",className:"btn btn-success"},"Submit"))}),w=(a(84),a(63)),y=function(e){var t=r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"nav-item"},r.a.createElement(s.b,{className:"nav-link",to:"/"},"Login")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(s.b,{className:"nav-link",to:"/signup"},"Signup"))),a=null;e.isAuth&&(a=r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"/"},"Order")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"/orders"},"History")),e.isAdmin&&r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"/dashboard"},"Dashboard"))));var n=r.a.createElement("li",{className:"nav-item"},r.a.createElement(s.b,{className:"nav-link",to:"#",onClick:e.logout},r.a.createElement(w.a,null)));return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},r.a.createElement("a",{className:"navbar-brand",href:"/#"},"Joey's Pizza"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNav"},r.a.createElement("ul",{className:"navbar-nav NavBar d-flex"},a,e.isAuth?n:t)))},x=a(49),C=a(44),k=(a(89),a(64)),N=function(e){return r.a.createElement("li",{className:"list-group-item d-flex justify-content-between align-items-center"},e.name,r.a.createElement("span",{className:"badge badge-primary badge-pill",onClick:function(){return e.handleSelectMenuItem(e.name,e.price,!0)}},e.quantity),r.a.createElement("div",null,"$ ",e.totalPrice.toFixed(2)),r.a.createElement(k.a,{onClick:function(t){return e.renderCartModal(t,e.name)}}))},O=function(e){var t=e.currentOrder.map((function(t){return r.a.createElement(N,{key:t.name,name:t.name,price:t.price,quantity:t.quantity,totalPrice:t.totalPrice,renderCartModal:e.renderCartModal,handleSelectMenuItem:e.handleSelectMenuItem})}));return r.a.createElement("div",{className:"MiniCart"},r.a.createElement("ul",{className:"list-group"},t.length?t:r.a.createElement("div",{className:"text-center"},r.a.createElement("h6",{className:"border-top pt-2"},"- Cart Empty -"))))},I=a(117),S=a(67),M=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={quantity:a.props.currentItemEditMode?+a.props.currentItemEditMode.quantity:1},a.setQuantity=function(e){a.setState({quantity:+e.target.value})},a}return Object(v.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){for(var e=this,t=[],a=1;a<=10;a++)t.push(r.a.createElement("option",{value:+a,key:a},a));var n=this.props.itemPrice*this.state.quantity;return r.a.createElement(I.a,{show:this.props.show,onHide:function(){e.props.handleClose(),e.setState({quantity:1})}},r.a.createElement(I.a.Header,{closeButton:!0},r.a.createElement(I.a.Title,null,"Add to Cart")),r.a.createElement(I.a.Body,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},"Do you want to add the following to your order:"),r.a.createElement("div",{className:"col-8 d-flex text-center align-items-center justify-content-between"},r.a.createElement("div",null,this.props.itemName),r.a.createElement("div",null,"$ ",this.props.itemPrice.toFixed(2))),r.a.createElement("div",{className:"col-4"},r.a.createElement("div",{className:"input-group"},r.a.createElement("select",{className:"custom-select",id:"inputGroupSelect04",onChange:this.setQuantity,defaultValue:this.props.currentItemEditMode?+this.props.currentItemEditMode.quantity:1},t))))),r.a.createElement(I.a.Footer,null,r.a.createElement("div",{className:"d-flex justify-content-between row w-100 align-items-center"},r.a.createElement("div",null,"Total: $ ",n.toFixed(2)),r.a.createElement("div",null,r.a.createElement(S.a,{variant:"secondary",onClick:function(){e.props.handleClose(),e.setState({quantity:1})}},"Close"),this.state.quantity>0&&r.a.createElement(S.a,{variant:"success",onClick:function(){e.props.handleSubmit(e.state.quantity,n,e.props.currentItemEditMode),e.setState({quantity:1})}},this.props.currentItemEditMode?"Update Cart":"Add to Cart")))))}}]),t}(n.Component),j=a(114),P=a(68),A=a.n(P);console.log("production");var D=A.a.create({baseURL:"http://localhost:3001"}),q=a(40),F=a.n(q),T=function(e){e?D.defaults.headers.common.Authorization=e:delete D.defaults.headers.common.Authorization},L=function(){var e=localStorage.getItem("jwtToken");if(!e)return!1;var t=F()(e),a=Date.now()/1e3;return t.exp<a?(localStorage.removeItem("jwtToken"),T(null),!1):(T(e),{id:t._id})},H=function(){var e;return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return L(),t.prev=1,t.next=4,u.a.awrap(D.get("/api/users/me",G));case 4:return e=t.sent,t.abrupt("return",e.data);case 8:t.prev=8,t.t0=t.catch(1),console.log("error",t.t0);case 11:case"end":return t.stop()}}),null,null,[[1,8]])},B=function(){return u.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:L();try{localStorage.removeItem("jwtToken"),this.setState({isAuthenticated:!1,isAdmin:!1,errMessage:"",showErr:!1,toLogin:!0},(function(){return u.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.awrap(D.post("/api/users/logout",G));case 2:case"end":return e.stop()}}))}))}catch(t){console.log("error ",t)}case 2:case"end":return e.stop()}}),null,this)},$=function(e){var t;return u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return L(),a.prev=1,a.next=4,u.a.awrap(D.post("/api/orders",e,G));case 4:t=a.sent,console.log(t),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),console.log("error",a.t0);case 11:case"end":return a.stop()}}),null,null,[[1,8]])},z=function(){var e;return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return L(),t.prev=1,t.next=4,u.a.awrap(D.get("/api/orders",G));case 4:return e=t.sent,t.abrupt("return",e);case 8:t.prev=8,t.t0=t.catch(1),console.log("error",t.t0);case 11:case"end":return t.stop()}}),null,null,[[1,8]])},_=function(){var e;return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return L(),t.prev=1,t.next=4,u.a.awrap(D.get("/api/orders/all",G));case 4:return e=t.sent,t.abrupt("return",e);case 8:t.prev=8,t.t0=t.catch(1),console.log("error",t.t0);case 11:case"end":return t.stop()}}),null,null,[[1,8]])},K=function(){var e;return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return L(),t.prev=1,t.next=4,u.a.awrap(D.delete("/api/users/removeCurrentOrder"));case 4:e=t.sent,console.log(e),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log("error",t.t0);case 11:case"end":return t.stop()}}),null,null,[[1,8]])},R=function(){var e;return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return L(),t.prev=1,t.next=4,u.a.awrap(D.get("https://joey-s-pizza-795aa.firebaseio.com/menu.json",G));case 4:return e=t.sent,console.log(e),t.abrupt("return",e.data);case 9:t.prev=9,t.t0=t.catch(1),console.log("error",t.t0);case 12:case"end":return t.stop()}}),null,null,[[1,9]])},U=function(e){return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return L(),t.prev=1,t.next=4,u.a.awrap(D.put("/api/orders/cancel/".concat(e)));case 4:this.setOrders(),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),console.log("error",t.t0);case 10:case"end":return t.stop()}}),null,this,[[1,7]])},J=function(e){return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return L(),t.prev=1,t.next=4,u.a.awrap(D.put("/api/orders/resume/".concat(e)));case 4:this.setOrders(),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),console.log("error",t.t0);case 10:case"end":return t.stop()}}),null,this,[[1,7]])},Q=function(e){return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return L(),t.prev=1,t.next=4,u.a.awrap(D.put("/api/orders/complete/".concat(e)));case 4:this.setOrders(),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),console.log("error",t.t0);case 10:case"end":return t.stop()}}),null,this,[[1,7]])},W=function(e){return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return L(),t.prev=1,t.next=4,u.a.awrap(D.put("/api/orders/incomplete/".concat(e)));case 4:this.setOrders(),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),console.log("error",t.t0);case 10:case"end":return t.stop()}}),null,this,[[1,7]])},G={headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*"}},V=function(e){return r.a.createElement(I.a,{show:e.show,onHide:e.handleClose},r.a.createElement(I.a.Header,{closeButton:!0},r.a.createElement(I.a.Title,null,e.title)),r.a.createElement(I.a.Body,null,r.a.createElement("div",null,"Are you sure you want to remove ",e.cartItemName,"?")),r.a.createElement(I.a.Footer,null,r.a.createElement(S.a,{variant:"secondary",onClick:e.handleClose},"Close"),r.a.createElement(S.a,{variant:"danger",onClick:function(t){return e.deleteCartItem(t,e.cartItemName)}},"Remove from order")))},Y=a(73),X=function(e){return r.a.createElement("li",{className:"list-group-item d-flex justify-content-between align-items-center border-0"},e.name,r.a.createElement("span",{className:""},e.quantity),r.a.createElement("div",null,"$ ",e.totalPrice.toFixed(2)))},Z=function(e){var t=e.currentOrder.map((function(t){return r.a.createElement(X,{key:t.name,name:t.name,price:t.price,quantity:t.quantity,totalPrice:t.totalPrice,renderCartModal:e.renderCartModal,handleSelectMenuItem:e.handleSelectMenuItem})}));return r.a.createElement("div",{className:"MiniCart"},r.a.createElement("ul",{className:"list-group border-0"},t))},ee=function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.currentOrder.reduce((function(e,t){return e[0]+=t.quantity,e[1]+=t.totalPrice,e}),[0,0]),t=Object(Y.a)(e,2),a=t[0],n=t[1];return r.a.createElement("div",null,r.a.createElement(I.a,{show:this.props.show,onHide:this.props.handleClose},r.a.createElement(I.a.Header,{closeButton:!0},r.a.createElement(I.a.Title,null,"Place Order Confirmation")),r.a.createElement(I.a.Body,null,"Are you ready to place your order?",r.a.createElement(Z,{currentOrder:this.props.currentOrder,renderCartModal:this.props.renderCartModal,handleSelectMenuItem:this.props.handleSelectMenuItem}),r.a.createElement("div",{className:"list-group-item d-flex justify-content-end text-center pr-5 border-0"},r.a.createElement("div",{className:"d-flex flex-column justify-content-center"},r.a.createElement("div",null,"Count:"),r.a.createElement("div",null,"Total:")),r.a.createElement("div",{className:"d-flex flex-column justify-content-center ml-2 text-left"},r.a.createElement("div",null,a),r.a.createElement("div",null,"$",n.toFixed(2))))),r.a.createElement(I.a.Footer,{className:""},r.a.createElement(S.a,{variant:"secondary",onClick:this.props.handleClose},"Close"),r.a.createElement(S.a,{variant:"primary",onClick:this.props.handleSubmit},"Place Order"))))}}]),t}(n.Component),te=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={currentOrder:[],show:!1,menu:null,currentMenuItem:null,currentDeleteItem:null,showDeleteModal:!1,currentItemEditMode:null,showCheckoutModal:!1},a.handleShow=function(){a.setState({show:!0})},a.handleClose=function(){a.setState({show:!1,currentItemEditMode:null})},a.handleDeleteModalClose=function(){a.setState({showDeleteModal:!1,currentDeleteItem:null})},a.handleCheckoutModalClose=function(){a.setState({showCheckoutModal:!1})},a.handleCheckoutSubmit=function(){return u.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({showCheckoutModal:!1}),e.prev=1,e.next=4,u.a.awrap($(a.state.currentOrder));case 4:return e.sent,e.next=7,u.a.awrap(K());case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:a.props.history.push("/orders");case 13:case"end":return e.stop()}}),null,null,[[1,9]])},a.handleSelectMenuItem=function(e,t,n){if(n){var r=a.state.currentOrder.findIndex((function(t){return t.name===e})),l=Object(C.a)(a.state.currentOrder)[r];console.log(l),a.setState({currentMenuItem:{name:e,price:t},currentItemEditMode:l},(function(){a.handleShow()}))}else a.setState({currentMenuItem:{name:e,price:t},currentItemEditMode:null},(function(){a.handleShow()}))},a.handleSubmit=function(e,t,n){a.handleClose();var r=Object(x.a)({},a.state.currentMenuItem,{quantity:e,totalPrice:t}),l=a.state.currentOrder.findIndex((function(e){return e.name===r.name}));l>-1?a.setState((function(e){var t=Object(C.a)(a.state.currentOrder),c=Object(x.a)({},a.state.currentOrder[l]);return n?(c.quantity=+r.quantity,c.totalPrice=+r.totalPrice):(c.quantity+=+r.quantity,c.totalPrice+=+r.totalPrice),t[l]=c,{currentOrder:t,currentMenuItem:null}}),(function(){a.saveOrderInProgress(),a.setState({currentItemEditMode:null})})):a.setState((function(e){return{currentOrder:[].concat(Object(C.a)(e.currentOrder),[r])}}),(function(){a.saveOrderInProgress()}))},a.saveOrderInProgress=function(){return u.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(L().id){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,u.a.awrap(D.post("/api/users/saveOrder",a.state.currentOrder,G));case 6:e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.log(e.t0);case 12:case"end":return e.stop()}}),null,null,[[3,9]])},a.componentDidMount=function(){var e,t;return u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(L().id){n.next=3;break}return n.abrupt("return");case 3:return n.prev=3,n.next=6,u.a.awrap(D.get("/api/users/getOrder",G));case 6:return e=n.sent,n.next=9,u.a.awrap(R());case 9:t=n.sent,a.setState({currentOrder:e.data,menu:t}),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(3),console.log(n.t0);case 16:case"end":return n.stop()}}),null,null,[[3,13]])},a.deleteCartItem=function(e,t){var n;return u.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(L().id){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,u.a.awrap(D.delete("/api/users/orderItem/".concat(t),G));case 6:n=e.sent,a.setState({currentOrder:n.data.currentOrder,showDeleteModal:!1,currentDeleteItem:null}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.log(e.t0);case 13:case"end":return e.stop()}}),null,null,[[3,10]])},a.renderCartModal=function(e,t){return u.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({currentDeleteItem:t},(function(){a.setState({showDeleteModal:!0})}));case 1:case"end":return e.stop()}}))},a.orderCheckout=function(){a.setState({showCheckoutModal:!0})},a}return Object(v.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=[];return this.state.menu&&(t=["Pies","Pasta","Drinks"].map((function(t,a){return r.a.createElement(r.a.Fragment,{key:a},r.a.createElement("h4",null,t),r.a.createElement("hr",null),e.state.menu[t].map((function(t){return r.a.createElement("li",{className:"list-group-item border-0 MenuItem",key:t.name,onClick:function(){return e.handleSelectMenuItem(t.name,t.price)}},t.name,r.a.createElement("span",null,"$ ",t.price.toFixed(2)))})))}))),r.a.createElement("div",{className:"Menu"},this.state.currentMenuItem&&!this.state.currentItemEditMode?r.a.createElement(M,{handleClose:this.handleClose,handleSubmit:this.handleSubmit,show:this.state.show,itemName:this.state.currentMenuItem.name,itemPrice:this.state.currentMenuItem.price}):null,this.state.currentMenuItem&&this.state.currentItemEditMode?r.a.createElement(M,{handleClose:this.handleClose,handleSubmit:this.handleSubmit,show:this.state.show,itemName:this.state.currentMenuItem.name,itemPrice:this.state.currentMenuItem.price,currentItemEditMode:this.state.currentItemEditMode}):null,this.state.showCheckoutModal&&r.a.createElement(ee,{show:this.state.showCheckoutModal,handleClose:this.handleCheckoutModalClose,handleSubmit:this.handleCheckoutSubmit,currentOrder:this.state.currentOrder,renderCartModal:this.renderCartModal,handleSelectMenuItem:this.handleSelectMenuItem}),this.state.showDeleteModal?r.a.createElement(V,{show:this.state.showDeleteModal,title:"Delete Cart Item",cartItemName:this.state.currentDeleteItem,deleteCartItem:this.deleteCartItem,handleClose:this.handleDeleteModalClose}):null,r.a.createElement("div",{className:"row"},this.state.menu?r.a.createElement("div",{className:"col-8"},t):r.a.createElement("div",{className:"col-8 spinner"},r.a.createElement(j.a,{animation:"grow",role:"status",variant:"danger"},r.a.createElement("span",{className:"sr-only"},"Loading..."))),r.a.createElement("div",{className:"col-4 border-left d-flex flex-column justify-content-between"},r.a.createElement("div",null,r.a.createElement("h4",null,"Your Cart"),r.a.createElement(O,{currentOrder:this.state.currentOrder,renderCartModal:this.renderCartModal,handleSelectMenuItem:this.handleSelectMenuItem})),this.state.currentOrder.length?r.a.createElement(S.a,{variant:"outline-primary",onClick:this.orderCheckout},"Place Order"):null)))}}]),t}(n.Component),ae=a(119),ne=a(115),re=a(116),le=a(120),ce=(a(109),function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={orders:[]},a}return Object(v.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.setOrders()}},{key:"setOrders",value:function(){var e;return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.a.awrap(z());case 3:e=t.sent,this.setState({orders:e.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),null,this,[[0,7]])}},{key:"render",value:function(){var e=this,t=r.a.createElement(ae.a.Container,{id:"list-group-tabs-example",defaultActiveKey:"#link1"},r.a.createElement(ne.a,null,r.a.createElement(re.a,{sm:4},r.a.createElement(le.a,null,this.state.orders.map((function(e,t){return r.a.createElement(le.a.Item,{key:t,action:!0,href:"#link".concat(t)},r.a.createElement("span",null,e.completed?"done":e.submitted?"In work":"cancelled"),r.a.createElement("div",null,new Date(e.createdAt).toDateString()),r.a.createElement("div",null,new Date(e.createdAt).toLocaleTimeString()))})))),r.a.createElement(re.a,{sm:8},r.a.createElement(ae.a.Content,null,this.state.orders.map((function(t,a){return r.a.createElement(ae.a.Pane,{eventKey:"#link".concat(a),key:a,className:"border rounded p-2"},r.a.createElement("div",null,t.completed?r.a.createElement("div",{className:"alert alert-success",role:"alert"},"Done"):t.submitted?r.a.createElement("div",{className:"alert alert-warning",role:"alert"},"In Work"):r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"Cancelled"),r.a.createElement("div",null,r.a.createElement(Z,{currentOrder:t.content}),r.a.createElement("div",{className:"list-group-item d-flex justify-content-between align-items-center text-center pr-5 border-0"},t.submitted?r.a.createElement(S.a,{variant:"danger",onClick:U.bind(e,t._id)},"Cancel Order"):r.a.createElement("div",null),r.a.createElement("div",{className:"d-flex"},r.a.createElement("div",{className:"d-flex flex-column justify-content-center"},r.a.createElement("div",null,"Count:"),r.a.createElement("div",null,"Total:")),r.a.createElement("div",{className:"d-flex flex-column justify-content-center ml-2 text-left"},r.a.createElement("div",null,t.content.reduce((function(e,t){return e+t.quantity}),0)),r.a.createElement("div",null,"$",t.content.reduce((function(e,t){return e+t.totalPrice}),0).toFixed(2))))))))}))))));return this.state.orders.length||(t=r.a.createElement("h4",{className:"text-center"},"-- No orders yet --")),r.a.createElement("div",{className:"Orders"},t)}}]),t}(n.Component)),se=a(118),oe=a(72),ie=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={orders:[]},a}return Object(v.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.setOrders()}},{key:"setOrders",value:function(){var e;return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.a.awrap(_());case 3:e=t.sent,this.setState({orders:e.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),null,this,[[0,7]])}},{key:"render",value:function(){var e=this,t=r.a.createElement(ae.a.Container,{id:"list-group-tabs-example",defaultActiveKey:"#link1"},r.a.createElement(ne.a,null,r.a.createElement(re.a,{sm:4},r.a.createElement(le.a,null,this.state.orders.map((function(e,t){return r.a.createElement(le.a.Item,{key:t,action:!0,href:"#link".concat(t)},r.a.createElement("div",null,e.userId.email),r.a.createElement("span",null,e.completed?"Pickup":e.submitted?"In work":"cancelled"),r.a.createElement("div",null,new Date(e.createdAt).toDateString()),r.a.createElement("div",null,new Date(e.createdAt).toLocaleTimeString()))})))),r.a.createElement(re.a,{sm:8},r.a.createElement(ae.a.Content,null,this.state.orders.map((function(t,a){return r.a.createElement(ae.a.Pane,{eventKey:"#link".concat(a),key:a,className:"border rounded p-2"},r.a.createElement("div",null,t.completed?r.a.createElement("div",{className:"alert alert-success",role:"alert"},"Ready for Pickup"):t.submitted?r.a.createElement("div",{className:"alert alert-warning",role:"alert"},"In Work"):r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"Cancelled"),r.a.createElement("div",null,r.a.createElement(Z,{currentOrder:t.content}),r.a.createElement("div",{className:"list-group-item d-flex justify-content-between align-items-center text-center pr-5 border-0"},r.a.createElement(se.a,null,r.a.createElement(se.a.Toggle,{variant:"default",id:"dropdown-basic"},r.a.createElement(oe.a,null)),r.a.createElement(se.a.Menu,null,t.completed?r.a.createElement(se.a.Item,{onClick:W.bind(e,t._id)},"Mark Incomplete"):t.submitted?r.a.createElement(r.a.Fragment,null,r.a.createElement(se.a.Item,{onClick:U.bind(e,t._id)},"Cancel"),r.a.createElement(se.a.Item,{onClick:Q.bind(e,t._id)},"Complete")):r.a.createElement(se.a.Item,{onClick:J.bind(e,t._id)},"Resume"))),r.a.createElement("div",{className:"d-flex"},r.a.createElement("div",{className:"d-flex flex-column justify-content-center"},r.a.createElement("div",null,"Count:"),r.a.createElement("div",null,"Total:")),r.a.createElement("div",{className:"d-flex flex-column justify-content-center ml-2 text-left"},r.a.createElement("div",null,t.content.reduce((function(e,t){return e+t.quantity}),0)),r.a.createElement("div",null,"$",t.content.reduce((function(e,t){return e+t.totalPrice}),0).toFixed(2))))))))}))))));return this.state.orders.length||(t=r.a.createElement("h4",{className:"text-center"},"-- No orders yet --")),r.a.createElement("div",{className:"Orders"},t)}}]),t}(n.Component),ue=function(e,t){this.setState({showErr:e,errMessage:t})},me=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={isAuthenticated:!1,isAdmin:!1,email:"",password:"",passwordConfirm:"",errMessage:"",showErr:!1,toLogin:!1},a.handleSignupSubmit=function(e){var t,n,r;return u.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(e.preventDefault(),ue.call(Object(f.a)(a),!1,""),a.state.password===a.state.passwordConfirm){l.next=5;break}return ue.call(Object(f.a)(a),!0,"password confirmation doesn't match"),l.abrupt("return");case 5:return t={email:a.state.email,password:a.state.password},l.prev=6,l.next=9,u.a.awrap(D.post("/api/users/signup",t,G));case 9:return n=l.sent,r=a.setAuthTokenLocalStorage(n),console.log(a.props),l.abrupt("return",r);case 15:l.prev=15,l.t0=l.catch(6),l.t0.message.includes("450")&&ue.call(Object(f.a)(a),!0,"Email is used on an existing account");case 18:case"end":return l.stop()}}),null,null,[[6,15]])},a.setAuthTokenLocalStorage=function(e){var t=e.data,n=t.token,r=t.user;localStorage.setItem("jwtToken",n);var l=F()(n);return T(n),a.setState({isAuthenticated:!0,email:"",password:"",passwordConfirm:"",isAdmin:r.admin}),ue.call(Object(f.a)(a),!1,""),l},a.handleLoginSubmit=function(e){var t,n,r;return u.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return e.preventDefault(),t={email:a.state.email,password:a.state.password},l.prev=2,l.next=5,u.a.awrap(D.post("/api/users/login",t,G));case 5:return n=l.sent,console.log(n),r=a.setAuthTokenLocalStorage(n),l.abrupt("return",r);case 11:l.prev=11,l.t0=l.catch(2),l.t0.message.includes("400")&&ue.call(Object(f.a)(a),!0,"Invalid username or password");case 14:case"end":return l.stop()}}),null,null,[[2,11]])},a.deleteUser=function(){L(),D.delete("/api/users/me",G).then((function(e){localStorage.removeItem("jwtToken"),a.setState({isAuthenticated:!1})})).catch((function(e){return console.log(e.response.data.message)}))},a.handleChange=function(e){a.setState(Object(o.a)({},e.target.name,e.target.value))},a}return Object(v.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e;return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(!L()){t.next=6;break}return t.next=4,u.a.awrap(H());case 4:e=t.sent,this.setState({isAuthenticated:!0,isAdmin:e.admin});case 6:case"end":return t.stop()}}),null,this)}},{key:"render",value:function(){var e=this,t=r.a.createElement("div",{className:"alert alert-danger",role:"alert"},this.state.errMessage);if(this.state.toLogin)return this.setState({toLogin:!1}),r.a.createElement(E.a,{to:"/"});var a=r.a.createElement(E.d,null,r.a.createElement(E.b,{path:"/signup",render:function(){return r.a.createElement(g,{email:e.state.email,password:e.state.password,passwordConfirm:e.state.passwordConfirm,handleSubmit:e.handleSignupSubmit,handleChange:e.handleChange})}}),r.a.createElement(E.b,{path:"/",exact:!0,render:function(){return r.a.createElement(b,{email:e.state.email,password:e.state.password,handleSubmit:e.handleLoginSubmit,handleChange:e.handleChange})}}));return this.state.isAuthenticated&&(a=r.a.createElement(E.d,null,r.a.createElement(E.b,{path:"/orders",component:ce}),r.a.createElement(E.b,{path:"/dashboard",component:ie}),r.a.createElement(E.b,{path:"/",exact:!0,component:te}),r.a.createElement(E.a,{from:"/signup",to:"/"}))),r.a.createElement("div",{className:"App"},r.a.createElement(y,{isAuth:this.state.isAuthenticated,isAdmin:this.state.isAdmin,logout:B.bind(this)}),this.state.showErr&&t,a)}}]),t}(n.Component);a(111);c.a.render(r.a.createElement(s.a,null,r.a.createElement(me,null)),document.getElementById("root"))},74:function(e,t,a){e.exports=a(112)},79:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){},83:function(e,t,a){},84:function(e,t,a){},89:function(e,t,a){}},[[74,1,2]]]);
//# sourceMappingURL=main.81844fd8.chunk.js.map